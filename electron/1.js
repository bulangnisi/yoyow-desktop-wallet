webpackJsonp([1],{1151:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),l=n.n(s),i=n(3),c=n(15),u=(n.n(c),n(7)),p=n(1152),f=n(1153),_=n(33),h=n(1154),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return r(t,e),d(t,[{key:"componentWillMount",value:function(){p.a.getAssets()}},{key:"componentWillUpdate",value:function(){}},{key:"handleIssueToken",value:function(){p.a.toggleDialog(!0)}},{key:"render",value:function(){var e=this.props,t=e.tokens;e.loading;return l.a.createElement("div",{className:"layer-settings"},l.a.createElement("h3",null,this.translate("Token.title")),l.a.createElement("input",{type:"button",className:"button float-right",value:this.translate("Token.issue_button"),onClick:this.handleIssueToken.bind(this)}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("table",{className:"content-table",cellSpacing:0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:220},this.translate("Token.tab_head_symbol")),l.a.createElement("th",{width:220},this.translate("Token.tab_head_max")),l.a.createElement("th",{width:150},this.translate("Token.tab_head_precision")),l.a.createElement("th",{width:420},this.translate("Token.tab_head_desc")))),l.a.createElement("tbody",null,0==t.length?null:t.map(function(e,t){var n=e.options.description;return l.a.createElement("tr",{key:"token-c-"+t},l.a.createElement("td",null,e.symbol),l.a.createElement("td",null,_.a.formatToken(e.options.max_supply,e.precision).toString()),l.a.createElement("td",null,e.precision),l.a.createElement("td",{title:n},n.substring(0,15)+(n.length>15?"......":"")))}))),l.a.createElement(h.a,null))}}]),t}(i.a),b=[u.a,f.a],m=n.i(c.connect)(y,{listenTo:function(){return b},getProps:function(){var e={},t=!0,n=!1,a=void 0;try{for(var o,r=b[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;for(var l in s.getState())e[l]=s.getState()[l]}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}});t.default=m;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(y,"TokenContainer","/Users/benj/transfer/yoyow-desktop-wallet/app/components/Token/TokenContainer.jsx"),__REACT_HOT_LOADER__.register(b,"stores","/Users/benj/transfer/yoyow-desktop-wallet/app/components/Token/TokenContainer.jsx"),__REACT_HOT_LOADER__.register(m,"default","/Users/benj/transfer/yoyow-desktop-wallet/app/components/Token/TokenContainer.jsx"))}()},1152:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(5),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(){function e(){a(this,e)}return r(e,[{key:"getAssets",value:function(){return!0}},{key:"createToken",value:function(e,t,n,a,o,r){return function(s){return new Promise(function(l,i){s({issuer:e,symbol:t,precision:n,max_supply:a,description:o,broadcast:r,resolve:l,reject:i})})}}},{key:"toggleDialog",value:function(e){return e}}]),e}(),l=o.a.createActions(s);t.a=l;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"TokenActions","/Users/benj/transfer/yoyow-desktop-wallet/app/actions/TokenActions.js"),__REACT_HOT_LOADER__.register(l,"default","/Users/benj/transfer/yoyow-desktop-wallet/app/actions/TokenActions.js"))}()},1153:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(5),i=n(34),c=n(1152),u=n(31),p=(n.n(u),n(52)),f=n(7),_=n(42),h=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),d=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.bindActions(c.a),e.state=a({tokens:[],balance:{},fees:{},loading:!1,visible:!1,title:"",height:240,width:630},"loading",!1),e}return s(t,e),h(t,[{key:"onGetAssets",value:function(){var e=this,t=f.a.getWallet().yoyow_id;Promise.all([u.ChainStore.fetchAssets(),p.a.getBalanceByUid(t)]).then(function(a){var o=a[0],r=a[1];o.sort(function(e,t){return t.asset_id-e.asset_id}),n.i(_.remove)(o,function(e){return e.issuer!=t}),e.setState({tokens:o,balance:r})}).catch(function(e){})}},{key:"onCreateToken",value:function(e){var t=this,n=e.issuer,a=e.symbol,o=e.precision,r=e.max_supply,s=e.description,l=e.broadcast,i=e.resolve,c=e.reject;this._toggleLoading(!0),p.a.createAsset(n,a,o,r,s,null,l).then(function(e){t._toggleLoading(!1),l?i(e):t.setState({fees:e})}).catch(function(e){t._toggleLoading(!1),c(e)})}},{key:"onToggleDialog",value:function(e){this.setState({visible:e})}},{key:"_toggleLoading",value:function(e){this.setState({loading:e})}}]),t}(i.b),y=l.a.createStore(d,"TokenStore");t.a=y;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"TokenStore","/Users/benj/transfer/yoyow-desktop-wallet/app/stores/TokenStore.js"),__REACT_HOT_LOADER__.register(y,"default","/Users/benj/transfer/yoyow-desktop-wallet/app/stores/TokenStore.js"))}()},1154:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),l=n.n(s),i=n(3),c=n(15),u=(n.n(c),n(38)),p=n(37),f=n(7),_=n(1152),h=n(1153),d=n(149),y=n(29),b=n(42),m=(n.n(b),n(33)),v=n(43),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=function(t){function s(){a(this,s);var e=o(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return e.state={symbol:"",supply:0,precision:2,desc:"",st:null},e}return r(s,t),k(s,[{key:"_init",value:function(){this.setState({symbol:"",supply:0,precision:2,desc:"",st:null})}},{key:"componentWillUpdate",value:function(e){!this.props.visible&&e.visible&&this.getFees()}},{key:"getFees",value:function(){var e=this.state,t=e.symbol,n=e.supply,a=e.precision,o=e.desc,r=this.props.wallet.yoyow_id;_.a.createToken(r,t,a,n,o,!1)}},{key:"close",value:function(){var e=this;_.a.toggleDialog(!1),setTimeout(function(){e._init()},500)}},{key:"confirm",value:function(){var e=this;this.checkAccountValid(function(){var t=e.state,n=t.symbol,a=t.supply,o=t.desc,r=e.props,s=r.balance,l=r.fees,i=void 0;""==n?i=e.translate("Token.alert_require_symbol"):n.length<3?i=e.translate("Token.alert_min_symbol"):a<=0?i=e.translate("Token.alert_require_supply"):""==o?i=e.translate("Token.alert_require_desc"):l.min_fees>s.core_balance?i=e.translate("Token.alert_require_balance"):f.a.isLocked(!1)?p.a.unlock(!1).then(function(){e.__confirmCreate()}):e.__confirmCreate(),i&&y.a.alert(i)})}},{key:"__confirmCreate",value:function(){var e=this,t=this.state,n=t.symbol,a=t.supply,o=t.precision,r=t.desc,s=this.props.wallet.yoyow_id;_.a.createToken(s,n,o,a,r,!0).then(function(t){y.a.alert(e.translate("Token.success_text")),_.a.getAssets(),e.close()}).catch(function(t){t.message.indexOf("asset_symbol_itr == asset_indx.end")>=0?y.a.error(e.translate("Token.error_unique")):y.a.error(e.translate("Token.error_unknown"))})}},{key:"__timeoutGetFees",value:function(){var e=this;this.st&&clearTimeout(this.st),this.st=setTimeout(function(){e.getFees()},700)}},{key:"handleSymbolChange",value:function(e){var t=/^[a-zA-Z]+$/g,n=e.target.value;(t.test(n)&&n.length<=8||""==n)&&(this.setState({symbol:n.toUpperCase()}),this.__timeoutGetFees())}},{key:"handleSupplyChange",value:function(e){var t=/^[0-9]+$/g,a=e.target.value;""==a&&(a=0),t.test(a)&&a<=1e10&&this.setState({supply:n.i(b.round)(a)})}},{key:"handlePrecisionChange",value:function(e){this.setState({precision:parseInt(e.value)})}},{key:"handleDescChange",value:function(e){var t=e.target.value;m.a.charCounter(t)<100&&(this.setState({desc:t}),this.__timeoutGetFees())}},{key:"render",value:function(){var t=this.state,n=t.symbol,a=t.supply,o=t.desc,r=t.precision,s=this.translate("Token.issue_button"),i=this.props,c=i.visible,p=i.width,f=i.height,_=i.fees,h=i.loading;return l.a.createElement("div",{className:"popup-window token-container"},l.a.createElement(u.a,{visible:c,onClose:this.close.bind(this),height:f,width:p},l.a.createElement("div",{className:"title"},s),l.a.createElement("div",{className:"vh-flex"},l.a.createElement("div",{className:"edit-line"},l.a.createElement("label",{className:"edit-text-label",style:{width:"120px"}},this.translate("Token.edit_text_symbol")),l.a.createElement("input",{type:"text",className:"input-440",placeholder:this.translate("Token.edit_placeholder_symbol"),onChange:this.handleSymbolChange.bind(this),value:n})),l.a.createElement("div",{className:"edit-line"},l.a.createElement("label",{className:"edit-text-label",style:{width:"120px"}},this.translate("Token.edit_text_max")),l.a.createElement("input",{type:"text",className:"input-440",placeholder:this.translate("Token.edit_placeholder_max"),onChange:this.handleSupplyChange.bind(this),value:a})),l.a.createElement("div",{className:"edit-line"},l.a.createElement("label",{className:"edit-text-label",style:{width:"120px"}},this.translate("Token.edit_text_precision")),l.a.createElement(d.a,{width:"440px",className:"selecter",defaultObj:{value:"2",text:"2"},data:[{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],onChange:this.handlePrecisionChange.bind(this),chooseVal:r})),l.a.createElement("div",{className:"edit-line"},l.a.createElement("label",{className:"edit-text-label",style:{width:"120px"}},this.translate("Token.edit_text_desc")),l.a.createElement("textarea",{type:"text",className:"desc-text",placeholder:this.translate("Token.edit_placeholder_desc"),onChange:this.handleDescChange.bind(this),value:o})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"edit-line"},l.a.createElement("label",{className:"edit-text-label",style:{width:"120px"}},this.translate("Token.fees")),l.a.createElement("label",{className:"fee-text-label"},l.a.createElement("span",{className:"money-font"},n.length<3?"--":_.min_fees),l.a.createElement("span",{className:"m-l-10"},e.walletConfig.coin_unit)))),l.a.createElement("div",{className:"buttons"},h?l.a.createElement(v.a,null):l.a.createElement("div",null,l.a.createElement("input",{onClick:this.confirm.bind(this),className:"button-short",type:"button",value:this.translate("button.ok")}),l.a.createElement("input",{onClick:this.close.bind(this),className:"button-cancel",type:"button",value:this.translate("button.cancel")})))))}}]),s}(i.a),T=[f.a,h.a],E=n.i(c.connect)(g,{listenTo:function(){return T},getProps:function(){var e={},t=!0,n=!1,a=void 0;try{for(var o,r=T[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;for(var l in s.getState())e[l]=s.getState()[l]}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}});t.a=E;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(g,"TokenCreate","/Users/benj/transfer/yoyow-desktop-wallet/app/components/Token/TokenCreate.jsx"),__REACT_HOT_LOADER__.register(T,"stores","/Users/benj/transfer/yoyow-desktop-wallet/app/components/Token/TokenCreate.jsx"),__REACT_HOT_LOADER__.register(E,"default","/Users/benj/transfer/yoyow-desktop-wallet/app/components/Token/TokenCreate.jsx"))}()}).call(t,n(12))}});
//# sourceMappingURL=1.js.map